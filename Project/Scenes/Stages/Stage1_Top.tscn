[gd_scene load_steps=21 format=4 uid="uid://cdbo8k13a1hqw"]

[ext_resource type="Script" uid="uid://da8rnamhqosqf" path="res://Scenes/Stages/stage_1_top.gd" id="1_jdu85"]
[ext_resource type="PackedScene" uid="uid://df5fil5bw4u0j" path="res://Components/Player/Player.tscn" id="1_x8jrm"]
[ext_resource type="Shader" uid="uid://ddgwo6qauo3x0" path="res://Assets/Shaders/DistortionShader.tres" id="3_27gbj"]
[ext_resource type="Texture2D" uid="uid://fge70i1xk7j3" path="res://Assets/2D/Textures/CeuNoite.png" id="3_nc056"]
[ext_resource type="PackedScene" uid="uid://ckyky5q6ujbml" path="res://Components/Effects/CommonLayers.tscn" id="4_ehuit"]
[ext_resource type="PackedScene" uid="uid://h6yuremd8lvp" path="res://Components/Doors/Door.tscn" id="4_nc056"]
[ext_resource type="TileSet" uid="uid://qsxsnet0sy7c" path="res://Assets/2D/Tilesets/TowerTileSet.tres" id="4_rhccp"]
[ext_resource type="Script" uid="uid://bn6a8ckr7dymv" path="res://addons/saveEngine/scripts/SaveAgent.gd" id="8_0qwt7"]
[ext_resource type="PackedScene" uid="uid://dbmnn1n3fldiy" path="res://Components/NPC/Guia.tscn" id="9_cs0gx"]
[ext_resource type="Script" uid="uid://bhexx6mj1xv3q" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="10_675s2"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="11_vwgkt"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="12_vwgkt"]
[ext_resource type="Texture2D" uid="uid://xdavejuyog2a" path="res://Assets/2D/Tutorial/Tutorial_walk.png" id="13_7pfn8"]
[ext_resource type="Texture2D" uid="uid://bf7y57xashmt6" path="res://Assets/2D/Tutorial/Tutorial_Door.png" id="14_dlwrp"]

[sub_resource type="Resource" id="Resource_vwgkt"]
script = ExtResource("11_vwgkt")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_7pfn8"]
script = ExtResource("11_vwgkt")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="FastNoiseLite" id="FastNoiseLite_0qwt7"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_0qwt7"]
noise = SubResource("FastNoiseLite_0qwt7")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hsi7c"]
shader = ExtResource("3_27gbj")
shader_parameter/Distortion = SubResource("NoiseTexture2D_0qwt7")
shader_parameter/DistortionStrenght = 0.03

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cs0gx"]
size = Vector2(60, 248)

[node name="Stage1Top" type="Node2D"]
script = ExtResource("1_jdu85")

[node name="Camera2D" type="Camera2D" parent="."]
physics_interpolation_mode = 1
position = Vector2(2415, 915)
zoom = Vector2(2, 2)
process_callback = 0

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("12_vwgkt")

[node name="Cameras" type="Node2D" parent="."]

[node name="PlayerCamera" type="Node2D" parent="Cameras" node_paths=PackedStringArray("follow_target")]
top_level = true
position = Vector2(2415, 915)
script = ExtResource("10_675s2")
priority = 5
follow_mode = 5
follow_target = NodePath("../../Player")
zoom = Vector2(2, 2)
tween_resource = SubResource("Resource_vwgkt")
follow_damping = true

[node name="DoorCamera" type="Node2D" parent="Cameras"]
position = Vector2(102, 951)
script = ExtResource("10_675s2")
zoom = Vector2(2, 2)
tween_resource = SubResource("Resource_7pfn8")

[node name="SaveAgent" type="Node" parent="."]
script = ExtResource("8_0qwt7")
metadata/_custom_type_script = "uid://bn6a8ckr7dymv"

[node name="CommonLayers" parent="." instance=ExtResource("4_ehuit")]
position = Vector2(-94, -142)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
follow_viewport_enabled = true
scroll_base_scale = Vector2(0.01, 0.01)
scroll_ignore_camera_zoom = true

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
material = SubResource("ShaderMaterial_hsi7c")
position = Vector2(847, 1187)
scale = Vector2(2, 2)
texture = ExtResource("3_nc056")

[node name="Map" type="Node2D" parent="."]

[node name="Door" parent="Map" instance=ExtResource("4_nc056")]
position = Vector2(111, 1051)
Id = 1
IsOpen = true
TargetScene = "res://Scenes/Stages/Stage_2_Prime.tscn"

[node name="BaseGround" type="TileMapLayer" parent="Map"]
scale = Vector2(0.509123, 0.5)
tile_map_data = PackedByteArray("AAAKAA0AAAACAAEAAAALAA0AAAACAAEAAAAMAA0AAAACAAEAAAANAA0AAAACAAEAAAAOAA0AAAACAAEAAAAPAA0AAAACAAEAAAAQAA0AAAACAAEAAAARAA0AAAACAAEAAAASAA0AAAACAAEAAAATAA0AAAACAAEAAAAUAA0AAAACAAEAAAAVAA0AAAACAAEAAAAWAA0AAAACAAEAAAAXAA0AAAACAAEAAAAYAA0AAAACAAEAAAAJAA4AAAAGAAIAAAAKAA4AAAACAAIAAAALAA4AAAACAAIAAAAMAA4AAAACAAIAAAANAA4AAAACAAIAAAAOAA4AAAACAAIAAAAPAA4AAAACAAIAAAAQAA4AAAACAAIAAAARAA4AAAACAAIAAAASAA4AAAACAAIAAAATAA4AAAACAAIAAAAUAA4AAAACAAIAAAAVAA4AAAACAAIAAAAWAA4AAAACAAIAAAAXAA4AAAACAAIAAAAZAA0AAAACAAEAAAAaAA0AAAACAAEAAAAaAA4AAAACAAIAAAAZAA4AAAACAAIAAAAYAA4AAAACAAIAAAAIAA8AAAACAAIAAAAJAA8AAAACAAIAAAAKAA8AAAACAAIAAAALAA8AAAACAAIAAAAMAA8AAAACAAIAAAANAA8AAAACAAIAAAAOAA8AAAACAAIAAAAPAA8AAAACAAIAAAAQAA8AAAACAAIAAAARAA8AAAACAAIAAAASAA8AAAACAAIAAAATAA8AAAACAAIAAAAUAA8AAAACAAIAAAAVAA8AAAACAAIAAAAWAA8AAAACAAIAAAAXAA8AAAACAAIAAAAYAA8AAAACAAIAAAAZAA8AAAACAAIAAAAaAA8AAAACAAIAAAAaABAAAAACAAIAAAAZABAAAAACAAIAAAAYABAAAAACAAIAAAAXABAAAAACAAIAAAAWABAAAAACAAIAAAAVABAAAAACAAIAAAAUABAAAAACAAIAAAATABAAAAACAAIAAAASABAAAAACAAIAAAARABAAAAACAAIAAAAQABAAAAACAAIAAAAPABAAAAACAAIAAAAOABAAAAACAAIAAAANABAAAAACAAIAAAAMABAAAAACAAIAAAALABAAAAACAAIAAAAKABAAAAACAAIAAAAJABAAAAACAAIAAAAIABAAAAACAAIAAAAHABAAAAACAAIAAAAbAA0AAAACAAEAAAAbAA4AAAACAAIAAAAbAA8AAAACAAIAAAAbABAAAAACAAIAAAAcABAAAAACAAIAAAAdABAAAAACAAIAAAAeABAAAAACAAIAAAAfABAAAAACAAIAAAAgABAAAAACAAIAAAAhABAAAAACAAIAAAAhAA8AAAACAAIAAAAhAA4AAAACAAIAAAAhAA0AAAAGAAIAAAAgAA0AAAACAAEAAAAfAA0AAAACAAEAAAAeAA0AAAACAAEAAAAdAA0AAAACAAEAAAAcAA0AAAACAAEAAAAcAA4AAAACAAIAAAAcAA8AAAACAAIAAAAdAA8AAAACAAIAAAAeAA4AAAACAAIAAAAfAA4AAAACAAIAAAAgAA4AAAACAAIAAAAgAA8AAAACAAIAAAAfAA8AAAACAAIAAAAeAA8AAAACAAIAAAAdAA4AAAACAAIAAAAiAA0AAAADAAIAAAAiAA4AAAADAAIAAAAiAA8AAAADAAIAAAAiABAAAAADAAIAAAAhAAwAAAABAAIAAAAhAAsAAAABAAIAAAAhAAoAAAABAAEAAAAiAAoAAAADAAEAAAAiAAsAAAADAAIAAAAiAAwAAAADAAIAAAAGABEAAAACAAIAAAAHABEAAAACAAIAAAAIABEAAAACAAIAAAAJABEAAAACAAIAAAAKABEAAAACAAIAAAALABEAAAACAAIAAAAMABEAAAACAAIAAAANABEAAAACAAIAAAAOABEAAAACAAIAAAAPABEAAAACAAIAAAAQABEAAAACAAIAAAARABEAAAACAAIAAAASABEAAAACAAIAAAATABEAAAACAAIAAAAUABEAAAACAAIAAAAVABEAAAACAAIAAAAWABEAAAACAAIAAAAXABEAAAACAAIAAAAYABEAAAACAAIAAAAZABEAAAACAAIAAAAaABEAAAACAAIAAAAbABEAAAACAAIAAAAcABEAAAACAAIAAAAdABEAAAACAAIAAAAeABEAAAACAAIAAAAfABEAAAACAAIAAAAgABEAAAACAAIAAAAhABEAAAACAAIAAAAiABEAAAADAAIAAAAiABIAAAADAAIAAAAiABMAAAADAAIAAAAiABQAAAADAAMAAAAhABQAAAACAAMAAAAgABQAAAACAAMAAAAfABQAAAACAAMAAAAeABQAAAACAAMAAAAdABQAAAACAAMAAAAcABQAAAACAAMAAAAbABQAAAACAAMAAAAaABQAAAACAAMAAAAZABQAAAACAAMAAAAYABQAAAACAAMAAAAXABQAAAACAAMAAAAWABQAAAACAAMAAAAVABQAAAACAAMAAAAUABQAAAACAAMAAAATABQAAAACAAMAAAASABQAAAACAAMAAAARABQAAAACAAMAAAAQABQAAAACAAMAAAAPABQAAAACAAMAAAAOABQAAAACAAMAAAANABQAAAACAAMAAAAMABQAAAACAAMAAAALABQAAAACAAMAAAAKABQAAAACAAMAAAAJABQAAAACAAMAAAAIABQAAAACAAMAAAAHABQAAAACAAMAAAAGABQAAAACAAMAAAAFABQAAAACAAMAAAAEABQAAAACAAMAAAADABQAAAACAAMAAAACABQAAAACAAMAAAABABQAAAACAAMAAAAAABQAAAACAAMAAAAAABIAAAACAAIAAAABABIAAAACAAIAAAACABIAAAACAAIAAAADABIAAAACAAIAAAAEABIAAAACAAIAAAAFABIAAAACAAIAAAAGABIAAAACAAIAAAAHABIAAAACAAIAAAAIABIAAAACAAIAAAAJABIAAAACAAIAAAAKABIAAAACAAIAAAALABIAAAACAAIAAAAMABIAAAACAAIAAAANABIAAAACAAIAAAAOABIAAAACAAIAAAAPABIAAAACAAIAAAAQABIAAAACAAIAAAARABIAAAACAAIAAAASABIAAAACAAIAAAATABIAAAACAAIAAAAUABIAAAACAAIAAAAVABIAAAACAAIAAAAWABIAAAACAAIAAAAXABIAAAACAAIAAAAYABIAAAACAAIAAAAZABIAAAACAAIAAAAaABIAAAACAAIAAAAbABIAAAACAAIAAAAcABIAAAACAAIAAAAdABIAAAACAAIAAAAeABIAAAACAAIAAAAfABIAAAACAAIAAAAgABIAAAACAAIAAAAhABIAAAACAAIAAAAhABMAAAACAAIAAAAgABMAAAACAAIAAAAfABMAAAACAAIAAAAeABMAAAACAAIAAAAdABMAAAACAAIAAAAcABMAAAACAAIAAAAbABMAAAACAAIAAAAaABMAAAACAAIAAAAZABMAAAACAAIAAAAYABMAAAACAAIAAAAXABMAAAACAAIAAAAVABMAAAACAAIAAAAWABMAAAACAAIAAAAUABMAAAACAAIAAAATABMAAAACAAIAAAASABMAAAACAAIAAAARABMAAAACAAIAAAAQABMAAAACAAIAAAAPABMAAAACAAIAAAAOABMAAAACAAIAAAANABMAAAACAAIAAAAMABMAAAACAAIAAAALABMAAAACAAIAAAAKABMAAAACAAIAAAAJABMAAAACAAIAAAAIABMAAAACAAIAAAAHABMAAAACAAIAAAAGABMAAAACAAIAAAAFABMAAAACAAIAAAAEABMAAAACAAIAAAADABMAAAACAAIAAAACABMAAAACAAIAAAABABMAAAACAAIAAAAAABMAAAACAAIAAAD//w0AAAADAAIAAAD//w4AAAAHAAIAAAD//xIAAAACAAIAAAD//xMAAAACAAIAAAD//xQAAAACAAMAAAD//wwAAAADAAIAAAD//wsAAAADAAIAAAD//woAAAADAAEAAAD+/woAAAABAAEAAAD+/wsAAAABAAIAAAD+/wwAAAABAAIAAAD+/w0AAAABAAIAAAD+/w4AAAABAAIAAAD+/w8AAAABAAIAAAD+/xAAAAABAAIAAAD+/xEAAAABAAIAAAD+/xIAAAABAAIAAAD+/xMAAAABAAIAAAD+/xQAAAABAAMAAAAFABEAAAACAAIAAAAGABAAAAACAAIAAAAHAA8AAAACAAIAAAAIAA4AAAACAAEAAAD//w8AAAACAAIAAAD//xAAAAACAAIAAAD//xEAAAACAAIAAAAJAA0AAAAGAAEAAAAAAA4AAAACAAEAAAABAA4AAAACAAEAAAACAA4AAAACAAEAAAADAA4AAAACAAEAAAAEAA4AAAACAAEAAAAFAA4AAAACAAEAAAAGAA4AAAACAAEAAAAHAA4AAAACAAEAAAAGAA8AAAACAAIAAAAFAA8AAAACAAIAAAAEAA8AAAACAAIAAAADAA8AAAACAAIAAAACAA8AAAACAAIAAAABAA8AAAACAAIAAAAAAA8AAAACAAIAAAAAABAAAAACAAIAAAAAABEAAAACAAIAAAABABEAAAACAAIAAAACABEAAAACAAIAAAADABEAAAACAAIAAAADABAAAAACAAIAAAAEABAAAAACAAIAAAAFABAAAAACAAIAAAACABAAAAACAAIAAAABABAAAAACAAIAAAAEABEAAAACAAIAAAA=")
tile_set = ExtResource("4_rhccp")

[node name="Player" parent="." instance=ExtResource("1_x8jrm")]
position = Vector2(2415, 915)

[node name="Guia" parent="." instance=ExtResource("9_cs0gx")]
position = Vector2(1256, 975)

[node name="IntroTrigger" type="Area2D" parent="."]
position = Vector2(-5, -82)

[node name="CollisionShape2D" type="CollisionShape2D" parent="IntroTrigger"]
position = Vector2(1388, 931)
shape = SubResource("RectangleShape2D_cs0gx")

[node name="TutorialWalk" type="Sprite2D" parent="."]
modulate = Color(0, 0, 0, 1)
position = Vector2(2596, 887)
scale = Vector2(0.330433, 0.330433)
texture = ExtResource("13_7pfn8")

[node name="TutorialDoor" type="Sprite2D" parent="."]
modulate = Color(0, 0, 0, 1)
position = Vector2(-63, 950)
scale = Vector2(0.50252, 0.50252)
texture = ExtResource("14_dlwrp")

[connection signal="body_entered" from="IntroTrigger" to="." method="_on_intro_trigger_body_entered"]
